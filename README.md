

# Hydra-Reviewer

The repo provides the code to reproduce the experiments in Hydra-Reviewer: A holistic multi-agent system for automatic code review comment generation.

## 1. Dependency

The dependencies are in `requirements.txt`,  use `pip install -r requirements.txt` to install required libraries.


## 2. Brief Introduction

**Hydra-Reviewer** is a review comment generation tool based on multi-agent systems and LLMs. It generates high-quality, multi-dimensional review comments through context retrieval, initial comment generation, and comment processing.

We supplement two publicly available datasets. We conduct extensive evaluations on Hydra-Reviewer, and perform ablation experiments by selecting 384 samples to validate the effectiveness of each component. At the same time, we construct an unseen dataset to assess the generalization ability of Hydra-Reviewer. The experimental results and the user study show that Hydra-Reviewer demonstrates great performance in the review comment generation task.

Demo data:

Input:

```python
{
    "patch": ""@@ -113,3 +113,5 @@\n+enableRichSchemas = False",
    "current_file": "import logging",
}
```

Output:

```python
1. **Variable Naming Convention**: Rename `enableRichSchemas` to `ENABLE_RICH_SCHEMAS` to maintain consistency with other constants like `CONTEXT_SIZE_LIMIT` and `JSON_LD_LIMIT`. 
2. **Flexibility for Configuration**: Provide a way to configure `enableRichSchemas` through an external configuration file or environment variable for greater versatility.
...
```

Input with `patch` and `current_file`, Hydra-Reviewer extracts the code snippets related to the `patch` from `current_file` and generates a review comment in the form of a list of suggestions for the `patch`.


## 3. File structure

- You can use Hydra-Reviewer by running the `Hydra-Reviewer/run.py` file.
- The complete supplemented (CR+CRN) dataset and the comments generated by different tools for RQ1 are available on [Zenodo](https://zenodo.org/records/15063416).
- The `Data` folder contains the experimental data corresponding to each section.
- The evaluation results are omitted, but you can regenerate them using the provided code and data.

```
.
├── Code                    
│   ├── Hydra-Reviewer       # Hydra-Reviewer Python project
│   └── ResultStatistics     # Quantitative evaluation experiment code
└── Data                   
    ├── EmpiricalStudy       
    ├── RQ2                  
    ├── RQ3                  
    ├── RQ4                  
    └── UserStudy            
```